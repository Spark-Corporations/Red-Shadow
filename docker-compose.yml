# RedClaw V3.1 - Docker Compose
# Usage:
#   docker compose up       -> Pentest DEFAULT_TARGET
#   docker compose run redclaw <TARGET_IP>

services:
  redclaw:
    build: .
    image: redclaw:3.1
    container_name: redclaw-pentest
    stdin_open: true
    tty: true
    environment:
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY:-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}
      - DEFAULT_TARGET=${TARGET:-192.168.1.83}
    volumes:
      # Persist engagement reports on host
      - ./engagements:/root/.redclaw/engagements
    network_mode: host   # Access local network targets
    # Override CMD with target IP
    command: ["${TARGET:-192.168.1.83}"]
